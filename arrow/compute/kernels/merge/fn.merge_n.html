<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Merges elements by index from a list of `Array`, creating a new `Array` from those values."><title>merge_n in arrow::compute::kernels::merge - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-b7b9f40b.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="arrow" data-themes="" data-resource-suffix="" data-rustdoc-version="1.95.0-nightly (a423f68a0 2026-02-13)" data-channel="nightly" data-search-js="search-fb33671b.js" data-stringdex-js="stringdex-b897f86f.js" data-settings-js="settings-170eb4bf.js" ><script src="../../../../static.files/storage-f9617a14.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../static.files/main-12f88f4f.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-f7c3ffd8.css"></noscript><link rel="icon" href="https://arrow.apache.org/img/arrow-logo_chevrons_black-txt_transparent-bg.svg"></head><body class="rustdoc fn"><a class="skip-main-content" href="#main-content">Skip to main content</a><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">merge_n</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../../../arrow/index.html"><img src="https://arrow.apache.org/img/arrow-logo_chevrons_black-txt_white-bg.svg" alt="logo"></a><h2><a href="../../../../arrow/index.html">arrow</a><span class="version">57.3.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">merge_n</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#implementation-notes" title="Implementation notes">Implementation notes</a></li><li><a href="#panics" title="Panics">Panics</a></li><li><a href="#example" title="Example">Example</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In arrow::<wbr>compute::<wbr>kernels::<wbr>merge</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content" tabindex="-1"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../index.html">arrow</a>::<wbr><a href="../../index.html">compute</a>::<wbr><a href="../index.html">kernels</a>::<wbr><a href="index.html">merge</a></div><h1>Function <span class="fn">merge_n</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"></span></div><pre class="rust item-decl"><code>pub fn merge_n(
    values: &amp;[&amp;dyn <a class="trait" href="../../../array/trait.Array.html" title="trait arrow::array::Array">Array</a>],
    indices: &amp;[impl <a class="trait" href="trait.MergeIndex.html" title="trait arrow::compute::kernels::merge::MergeIndex">MergeIndex</a>],
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;dyn <a class="trait" href="../../../array/trait.Array.html" title="trait arrow::array::Array">Array</a>&gt;, <a class="enum" href="../../../error/enum.ArrowError.html" title="enum arrow::error::ArrowError">ArrowError</a>&gt;</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Merges elements by index from a list of <a href="../../../array/trait.Array.html" title="trait arrow::array::Array"><code>Array</code></a>, creating a new <a href="../../../array/trait.Array.html" title="trait arrow::array::Array"><code>Array</code></a> from
those values.</p>
<p>Each element in <code>indices</code> is the index of an array in <code>values</code>. The <code>indices</code> array is processed
sequentially. The first occurrence of index value <code>n</code> will be mapped to the first
value of the array at index <code>n</code>. The second occurrence to the second value, and so on.
An index value where <code>MergeIndex::index</code> returns <code>None</code> is interpreted as a null value.</p>
<h2 id="implementation-notes"><a class="doc-anchor" href="#implementation-notes">§</a>Implementation notes</h2>
<p>This algorithm is similar in nature to both <a href="../zip/fn.zip.html" title="fn arrow::compute::kernels::zip::zip">zip</a> and
<a href="../../fn.interleave.html" title="fn arrow::compute::interleave">interleave</a>, but there are some important differences.</p>
<p>In contrast to <a href="../zip/fn.zip.html" title="fn arrow::compute::kernels::zip::zip">zip</a>, this function supports multiple input arrays. Instead of
a boolean selection vector, an index array is to take values from the input arrays, and a special
marker values can be used to indicate null values.</p>
<p>In contrast to <a href="../../fn.interleave.html" title="fn arrow::compute::interleave">interleave</a>, this function does not use pairs of
indices. The values in <code>indices</code> serve the same purpose as the first value in the pairs passed
to <code>interleave</code>.
The index in the array is implicit and is derived from the number of times a particular array
index occurs.
The more constrained indexing mechanism used by this algorithm makes it easier to copy values
in contiguous slices. In the example below, the two subsequent elements from array <code>2</code> can be
copied in a single operation from the source array instead of copying them one by one.
Long spans of null values are also especially cheap because they do not need to be represented
in an input array.</p>
<h2 id="panics"><a class="doc-anchor" href="#panics">§</a>Panics</h2>
<p>This function does not check that the number of occurrences of any particular array index matches
the length of the corresponding input array. If an array contains more values than required, the
spurious values will be ignored. If an array contains fewer values than necessary, this function
will panic.</p>
<h2 id="example"><a class="doc-anchor" href="#example">§</a>Example</h2><div class="example-wrap"><pre class="language-text"><code>┌───────────┐  ┌─────────┐                             ┌─────────┐
│┌─────────┐│  │   None  │                             │   NULL  │
││    A    ││  ├─────────┤                             ├─────────┤
│└─────────┘│  │    1    │                             │    B    │
│┌─────────┐│  ├─────────┤                             ├─────────┤
││    B    ││  │    0    │    merge(values, indices)   │    A    │
│└─────────┘│  ├─────────┤  ─────────────────────────▶ ├─────────┤
│┌─────────┐│  │   None  │                             │   NULL  │
││    C    ││  ├─────────┤                             ├─────────┤
│├─────────┤│  │    2    │                             │    C    │
││    D    ││  ├─────────┤                             ├─────────┤
│└─────────┘│  │    2    │                             │    D    │
└───────────┘  └─────────┘                             └─────────┘
   values        indices                                  result
</code></pre></div></div></details></section></div></main></body></html>