<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Applies a binary and infallible function to values in two arrays, replacing the values in the first array in place."><title>binary_mut in arrow::compute::kernels::arity - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-b7b9f40b.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="arrow" data-themes="" data-resource-suffix="" data-rustdoc-version="1.95.0-nightly (a423f68a0 2026-02-13)" data-channel="nightly" data-search-js="search-fb33671b.js" data-stringdex-js="stringdex-b897f86f.js" data-settings-js="settings-170eb4bf.js" ><script src="../../../../static.files/storage-f9617a14.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../static.files/main-12f88f4f.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-f7c3ffd8.css"></noscript><link rel="icon" href="https://arrow.apache.org/img/arrow-logo_chevrons_black-txt_transparent-bg.svg"></head><body class="rustdoc fn"><a class="skip-main-content" href="#main-content">Skip to main content</a><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">binary_mut</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../../../arrow/index.html"><img src="https://arrow.apache.org/img/arrow-logo_chevrons_black-txt_white-bg.svg" alt="logo"></a><h2><a href="../../../../arrow/index.html">arrow</a><span class="version">57.3.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">binary_<wbr>mut</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#details" title="Details">Details</a></li><li><a href="#buffer-reuse" title="Buffer Reuse">Buffer Reuse</a></li><li><a href="#errors" title="Errors">Errors</a></li><li><a href="#see-also" title="See Also">See Also</a></li><li><a href="#example" title="Example">Example</a></li><li><a href="#example-with-shared-buffers" title="Example with shared buffers">Example with shared buffers</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In arrow::<wbr>compute::<wbr>kernels::<wbr>arity</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content" tabindex="-1"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../index.html">arrow</a>::<wbr><a href="../../index.html">compute</a>::<wbr><a href="../index.html">kernels</a>::<wbr><a href="index.html">arity</a></div><h1>Function <span class="fn">binary_<wbr>mut</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"></span></div><pre class="rust item-decl"><code>pub fn binary_mut&lt;T, U, F&gt;(
    a: <a class="struct" href="../../../array/struct.PrimitiveArray.html" title="struct arrow::array::PrimitiveArray">PrimitiveArray</a>&lt;T&gt;,
    b: &amp;<a class="struct" href="../../../array/struct.PrimitiveArray.html" title="struct arrow::array::PrimitiveArray">PrimitiveArray</a>&lt;U&gt;,
    op: F,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../../array/struct.PrimitiveArray.html" title="struct arrow::array::PrimitiveArray">PrimitiveArray</a>&lt;T&gt;, <a class="enum" href="../../../error/enum.ArrowError.html" title="enum arrow::error::ArrowError">ArrowError</a>&gt;, <a class="struct" href="../../../array/struct.PrimitiveArray.html" title="struct arrow::array::PrimitiveArray">PrimitiveArray</a>&lt;T&gt;&gt;<div class="where">where
    T: <a class="trait" href="../../../array/trait.ArrowPrimitiveType.html" title="trait arrow::array::ArrowPrimitiveType">ArrowPrimitiveType</a>,
    U: <a class="trait" href="../../../array/trait.ArrowPrimitiveType.html" title="trait arrow::array::ArrowPrimitiveType">ArrowPrimitiveType</a>,
    F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&lt;T as <a class="trait" href="../../../array/trait.ArrowPrimitiveType.html" title="trait arrow::array::ArrowPrimitiveType">ArrowPrimitiveType</a>&gt;::<a class="associatedtype" href="../../../array/trait.ArrowPrimitiveType.html#associatedtype.Native" title="type arrow::array::ArrowPrimitiveType::Native">Native</a>, &lt;U as <a class="trait" href="../../../array/trait.ArrowPrimitiveType.html" title="trait arrow::array::ArrowPrimitiveType">ArrowPrimitiveType</a>&gt;::<a class="associatedtype" href="../../../array/trait.ArrowPrimitiveType.html#associatedtype.Native" title="type arrow::array::ArrowPrimitiveType::Native">Native</a>) -&gt; &lt;T as <a class="trait" href="../../../array/trait.ArrowPrimitiveType.html" title="trait arrow::array::ArrowPrimitiveType">ArrowPrimitiveType</a>&gt;::<a class="associatedtype" href="../../../array/trait.ArrowPrimitiveType.html#associatedtype.Native" title="type arrow::array::ArrowPrimitiveType::Native">Native</a>,</div></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Applies a binary and infallible function to values in two arrays, replacing
the values in the first array in place.</p>
<h2 id="details"><a class="doc-anchor" href="#details">§</a>Details</h2>
<p>Given two arrays of length <code>len</code>, calls <code>op(a[i], b[i])</code> for <code>i</code> in
<code>0..len</code>, modifying the <a href="../../../array/struct.PrimitiveArray.html" title="struct arrow::array::PrimitiveArray"><code>PrimitiveArray</code></a> <code>a</code> in place, if possible.</p>
<p>If any index is null in either <code>a</code> or <code>b</code>, the corresponding index in the
result will also be null.</p>
<h2 id="buffer-reuse"><a class="doc-anchor" href="#buffer-reuse">§</a>Buffer Reuse</h2>
<p>If the underlying buffers in <code>a</code> are not shared with other arrays,  mutates
the underlying buffer in place, without allocating.</p>
<p>If the underlying buffer in <code>a</code> are shared, returns Err(self)</p>
<p>Like <a href="../../fn.unary.html" title="fn arrow::compute::unary"><code>unary</code></a> the provided function is evaluated for every index, ignoring validity. This
is beneficial when the cost of the operation is low compared to the cost of branching, and
especially when the operation can be vectorised, however, requires <code>op</code> to be infallible
for all possible values of its inputs</p>
<h2 id="errors"><a class="doc-anchor" href="#errors">§</a>Errors</h2>
<ul>
<li>If the arrays have different lengths</li>
<li>If the array is not mutable (see “Buffer Reuse”)</li>
</ul>
<h2 id="see-also"><a class="doc-anchor" href="#see-also">§</a>See Also</h2>
<ul>
<li>Documentation on <a href="../../../array/struct.PrimitiveArray.html#method.unary_mut" title="method arrow::array::PrimitiveArray::unary_mut"><code>PrimitiveArray::unary_mut</code></a> for operating on <a href="../../../array/type.ArrayRef.html" title="type arrow::array::ArrayRef"><code>ArrayRef</code></a>.</li>
</ul>
<h2 id="example"><a class="doc-anchor" href="#example">§</a>Example</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// compute a + b for each element
</span><span class="kw">let </span>a = Float32Array::from(<span class="macro">vec!</span>[<span class="prelude-val">Some</span>(<span class="number">5.1f32</span>), <span class="prelude-val">None</span>, <span class="prelude-val">Some</span>(<span class="number">6.8</span>)]);
<span class="kw">let </span>b = Int32Array::from(<span class="macro">vec!</span>[<span class="prelude-val">Some</span>(<span class="number">1</span>), <span class="prelude-val">None</span>, <span class="prelude-val">Some</span>(<span class="number">2</span>)]);
<span class="comment">// compute a + b, updating the value in a in place if possible
</span><span class="kw">let </span>a = binary_mut(a, <span class="kw-2">&amp;</span>b, |a, b| a + b <span class="kw">as </span>f32).unwrap().unwrap();
<span class="comment">// a is updated in place
</span><span class="macro">assert_eq!</span>(a, Float32Array::from(<span class="macro">vec!</span>[<span class="prelude-val">Some</span>(<span class="number">6.1</span>), <span class="prelude-val">None</span>, <span class="prelude-val">Some</span>(<span class="number">8.8</span>)]));</code></pre></div><h2 id="example-with-shared-buffers"><a class="doc-anchor" href="#example-with-shared-buffers">§</a>Example with shared buffers</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>a = Float32Array::from(<span class="macro">vec!</span>[<span class="prelude-val">Some</span>(<span class="number">5.1f32</span>), <span class="prelude-val">None</span>, <span class="prelude-val">Some</span>(<span class="number">6.8</span>)]);
<span class="kw">let </span>b = Float32Array::from(<span class="macro">vec!</span>[<span class="prelude-val">Some</span>(<span class="number">1.0f32</span>), <span class="prelude-val">None</span>, <span class="prelude-val">Some</span>(<span class="number">2.0</span>)]);
<span class="comment">// a_clone shares the buffer with a
</span><span class="kw">let </span>a_cloned = a.clone();
<span class="comment">// try to update a in place, but it is shared. Returns Err(a)
</span><span class="kw">let </span>a = binary_mut(a, <span class="kw-2">&amp;</span>b, |a, b| a + b).unwrap_err();
<span class="macro">assert_eq!</span>(a_cloned, a);
<span class="comment">// drop shared reference
</span>drop(a_cloned);
<span class="comment">// now a is not shared, so we can update it in place
</span><span class="kw">let </span>a = binary_mut(a, <span class="kw-2">&amp;</span>b, |a, b| a + b).unwrap().unwrap();
<span class="macro">assert_eq!</span>(a, Float32Array::from(<span class="macro">vec!</span>[<span class="prelude-val">Some</span>(<span class="number">6.1</span>), <span class="prelude-val">None</span>, <span class="prelude-val">Some</span>(<span class="number">8.8</span>)]));</code></pre></div></div></details></section></div></main></body></html>