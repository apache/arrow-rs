<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A pool of memory that can be reserved and released."><title>MemoryPool in arrow_buffer - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="arrow_buffer" data-themes="" data-resource-suffix="" data-rustdoc-version="1.93.0-nightly (82ae0ee64 2025-10-31)" data-channel="nightly" data-search-js="search-6acd48a0.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-263c88ec.css"></noscript><link rel="icon" href="https://arrow.apache.org/img/arrow-logo_chevrons_black-txt_transparent-bg.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">MemoryPool</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../arrow_buffer/index.html"><img src="https://arrow.apache.org/img/arrow-logo_chevrons_black-txt_white-bg.svg" alt="logo"></a><h2><a href="../arrow_buffer/index.html">arrow_<wbr>buffer</a><span class="version">57.0.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Memory<wbr>Pool</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.available" title="available">available</a></li><li><a href="#tymethod.capacity" title="capacity">capacity</a></li><li><a href="#tymethod.reserve" title="reserve">reserve</a></li><li><a href="#tymethod.used" title="used">used</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate arrow_<wbr>buffer</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="index.html">arrow_buffer</a></div><h1>Trait <span class="trait">Memory<wbr>Pool</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/arrow_buffer/pool.rs.html#73-89">Source</a> </span></div><pre class="rust item-decl"><code>pub trait MemoryPool:
    <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>
    + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>
    + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> {
    // Required methods
    fn <a href="#tymethod.reserve" class="fn">reserve</a>(&amp;self, size: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="trait.MemoryReservation.html" title="trait arrow_buffer::MemoryReservation">MemoryReservation</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.available" class="fn">available</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.isize.html">isize</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.used" class="fn">used</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.capacity" class="fn">capacity</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A pool of memory that can be reserved and released.</p>
<p>This is used to accurately track memory usage when buffers are shared
between multiple arrays or other data structures.</p>
<p>For example, assume we have two arrays that share underlying buffer.
It’s hard to tell how much memory is used by them because we can’t
tell if the buffer is shared or not.</p>
<div class="example-wrap"><pre class="language-text"><code>      Array A           Array B    
   ┌────────────┐    ┌────────────┐
   │ slices...  │    │ slices...  │
   │────────────│    │────────────│
   │ Arc&lt;Bytes&gt; │    │ Arc&lt;Bytes&gt; │ (shared buffer)
   └─────▲──────┘    └───────▲────┘
         │                   │     
         │       Bytes       │     
         │  ┌─────────────┐  │     
         │  │   data...   │  │     
         │  │─────────────│  │     
         └──│   Memory    │──┘   (tracked with a memory pool)  
            │ Reservation │        
            └─────────────┘        </code></pre></div>
<p>With a memory pool, we can count the memory usage by the shared buffer
directly.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.reserve" class="method"><a class="src rightside" href="../src/arrow_buffer/pool.rs.html#77">Source</a><h4 class="code-header">fn <a href="#tymethod.reserve" class="fn">reserve</a>(&amp;self, size: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="trait.MemoryReservation.html" title="trait arrow_buffer::MemoryReservation">MemoryReservation</a>&gt;</h4></section></summary><div class="docblock"><p>Reserves memory from the pool. Infallible.</p>
<p>Returns a reservation of the requested size.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.available" class="method"><a class="src rightside" href="../src/arrow_buffer/pool.rs.html#82">Source</a><h4 class="code-header">fn <a href="#tymethod.available" class="fn">available</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.isize.html">isize</a></h4></section></summary><div class="docblock"><p>Returns the current available memory in the pool.</p>
<p>The pool may be overfilled, so this method might return a negative value.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.used" class="method"><a class="src rightside" href="../src/arrow_buffer/pool.rs.html#85">Source</a><h4 class="code-header">fn <a href="#tymethod.used" class="fn">used</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Returns the current used memory from the pool.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.capacity" class="method"><a class="src rightside" href="../src/arrow_buffer/pool.rs.html#88">Source</a><h4 class="code-header">fn <a href="#tymethod.capacity" class="fn">capacity</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Returns the maximum memory that can be reserved from the pool.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-MemoryPool-for-TrackingMemoryPool" class="impl"><a class="src rightside" href="../src/arrow_buffer/pool.rs.html#102-122">Source</a><a href="#impl-MemoryPool-for-TrackingMemoryPool" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.MemoryPool.html" title="trait arrow_buffer::MemoryPool">MemoryPool</a> for <a class="struct" href="struct.TrackingMemoryPool.html" title="struct arrow_buffer::TrackingMemoryPool">TrackingMemoryPool</a></h3></section></div><script src="../trait.impl/arrow_buffer/pool/trait.MemoryPool.js" async></script></section></div></main></body></html>